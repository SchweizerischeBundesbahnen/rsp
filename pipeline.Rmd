---
jupyter:
  jupytext:
    text_representation:
      extension: .Rmd
      format_name: rmarkdown
      format_version: '1.2'
      jupytext_version: 1.4.1
  kernelspec:
    display_name: Python [conda env:rsp] *
    language: python
    name: conda-env-rsp-py
---

```{python}
# %autosave 0
# %matplotlib notebook
# %matplotlib qt4
# %load_ext autoreload
# %autoreload 2
```

```{python}
import numpy as np
from rsp.utils.data_types import ParameterRanges
from rsp.utils.data_types import ParameterRangesAndSpeedData
from rsp.hypothesis_one_experiments import hypothesis_one_pipeline
```

```{python}
parameter_ranges = ParameterRanges(agent_range=[2, 2, 1],
                                       size_range=[18, 18, 1],
                                       in_city_rail_range=[2, 2, 1],
                                       out_city_rail_range=[1, 1, 1],
                                       city_range=[2, 2, 1],
                                       earliest_malfunction=[5, 5, 1],
                                       malfunction_duration=[20, 20, 1],
                                       number_of_shortest_paths_per_agent=[10, 10, 1],
                                       max_window_size_from_earliest=[np.inf, np.inf, 1],
                                       asp_seed_value=[94, 94, 1],
                                       # route change is penalized the same as 60 seconds delay
                                       weight_route_change=[60, 60, 1],
                                       weight_lateness_seconds=[1, 1, 1],
                                       )
# Define the desired speed profiles
speed_data = {1.: 0.25,  # Fast passenger train
              1. / 2.: 0.25,  # Fast freight train
              1. / 3.: 0.25,  # Slow commuter train
              1. / 4.: 0.25}  # Slow freight train
parameter_ranges_and_speed_data = ParameterRangesAndSpeedData(parameter_ranges=parameter_ranges, speed_data=speed_data)

experiment_base_folder = hypothesis_one_pipeline(
    parameter_ranges_and_speed_data=parameter_ranges_and_speed_data,
    experiment_ids=None,
    parallel_compute=1
)
```

```{python}
import shutil
from rsp.utils.file_utils import check_create_folder
import os

# persistent data is under /home/jovyan/data
dest =  "/home/jovyan/data"
# check_create_folder(dest)
# shutil.move(experiment_base_folder,dest)
```
